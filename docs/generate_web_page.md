# Формат шаблонов
Шаблон описывает форму, которая выводится на странице для заполнения промпта и формат вывода JSON промпта.
Шаблон описывается в формате JSON.

  ## Поля на форме
  На форме отображаются поля для заполнения или выбора, которые соответствуют полям выходного JSON промпта:
    - "text" — однострочное текстовое поле
    - "number" — числовой ввод
    - "textarea" — многострочное текстовое поле (по вертикали принимает размер необходимый для содержимого)
    - "select" — выпадающий список
    - "checkbox" — множественный выбор (чекбоксы с вариантами)
    - "color" — выбор цвета

  Каждое поле в промпте описывается специальной конструкцией, обязательно типа словарь.
  
  ### Простые поля
  ```json
    "field_name": {
      "type": "text / number / textarea / color",
      "label": "Описание поля",
      "default": null
    },
  ```
  ### Поля выбора
  ```json
    "field_name": {
      "type": "select / checkbox",
      "label": "Описание поля",
      "options": [
        { "value": "realistic", "label": "фотореализм, точные текстуры, физика и освещение, приближенные к реальному миру" },
        { "value": "cinematic", "label": "киношная постановка: глубина кадра, цветокоррекция, композиция, драматизм" }
      ],
      "default": "realistic" / для checkbox["realistic",] / null
    }
```
  ## Специальные поля в шаблоне
  - Выступают как управляющие команды при построении формы.
  - Имена начинаются с "_".
  - Имеют специальные обработчики.

  ### _version
  - Версия шаблона в шаблоне.
  - В промпте версия шаблона по которому построен этот промпт. 
  Служит для подбора правильного шаблона для отображения формы, при открытии промпта в редакторе.  
  Пример:
  ```
  "version": "video-1.0 (не учитывать в видео)"
  ```

  - Первая часть, до тире - указывает на совместимость промпта и шаблона.
  - Вторая часть, цифровая - это сама версия. Версии имеют обратную совместимость, т.е. более новые шаблоны умеют работать с промптами любой версии. 
  - Через пробел может содержать комментарий для модели.

### _section
Присутствует только в шаблоне.  
Указывает построителю формы что все содержимое словаря, в котором находится эта команда, должно быть под спойлером. Другими словами, указывает, где должны быть спойлеры и как они называются.  
Пример:
```
"_section": "Сцена "
```
Название спойлера в форме образуется из содержимого поля и номера _id в этом же словаре, если он есть (для повторяющихся элементов), если нет - просто из содержимого поля.

### _items
Содержит список повторяющихся элементов сцен, объектов. Элементы находящиеся в этом списке могут быть добавлены в форму (поля элемента), для этого на форме будет отображаться кнопка "+".  
В каждом элементе будет кнопка для очистки полей элемента и в случае если он не один в списке - удаления самого элемента.

### _id
Идентификатор повторяющихся элементов. В промпте может быть несколько сцен, в сценах может быть несколько объектов. Эти элементы повторяются, идентификатор находится в словаре нужного элемента и указывает его порядковый номер. По имени образованному от названия элемента и порядкового номера построитель форм идентифицирует div элементы в dom дереве. А скрипт формы управляет этим элементом (добавляет, удаляет, очищает).


```json
{
  "main": {
    "_version": "video-1.0 (не учитывать в видео)",
    "_section": "Общие параметры ролика",
    "title": {
      "type": "text",
      "label": "Название и/или короткое описание ролика",
      "default": ""
    },
    "duration": {
      "type": "number",
      "label": "Общая длительность в секундах (проверяется по длительности сцен)",
      "default": null
    },
    "style": {
      "type": "select",
      "label": "Визуальный стиль",
      "options": [
        { "value": "realistic", "label": "фотореализм, точные текстуры, физика и освещение, приближенные к реальному миру" },
        { "value": "cinematic", "label": "киношная постановка: глубина кадра, цветокоррекция, композиция, драматизм" },
        { "value": "cartoon", "label": "мультяшный стиль с упрощёнными формами, яркими цветами и контурной графикой" },
        { "value": "anime", "label": "японская анимация: стилизованные персонажи, динамичные сцены, характерные фоны" },
        { "value": "stylized", "label": "художественная стилизация: преувеличенные формы, нестандартные текстуры, выразительность" },
        { "value": "low-poly", "label": "упрощённая геометрия с минимальным числом полигонов, часто используется в 3D-визуализациях" },
        { "value": "pixel-art", "label": "пиксельная графика в ретро-стиле, напоминающая 8/16-битные игры" },
        { "value": "sketch", "label": "ручная прорисовка: карандашный, чернильный или маркерный стиль" },
        { "value": "abstract", "label": "художественный стиль без реализма, акцент на форму, цвет и движение" },
        { "value": "isometric", "label": "псевдо-3D с фиксированной перспективой, часто используется в инфографике и играх" },
        { "value": "minimalist", "label": "минимализм: простые формы, ограниченная палитра, чистый и лаконичный UX" },
        { "value": "surreal", "label": "сюрреализм: нелогичные сцены, метафоры, сны и необычные композиции" },
        { "value": "mixed", "label": "смешанный стиль, комбинирующий несколько подходов; уточняется на уровне сцены" }
      ],
      "default": null
    },
    "custom_style": {
      "type": "text",
      "label": "Описание кастомного стиля или уточнение выбранного",
      "default": ""
    },
    "prompt": {
      "type": "textarea",
      "label": "Глобальное краткое описание ролика: о чем, смысл, какие сцены (коротко), желаемый эффект на зрителя.",
      "default": ""
    }
  },


  "scenes": {
    "_section": "Сцены",
    "_items": [
      {
        "_section": "Сцена ",
        "_id": 1,
        "main": {
          "duration": {
            "type": "number",
            "label": "Длительность сцены (в секундах)",
            "default": null
          },
          "transition_from_previous": {
            "type": "select",
            "label": "Тип перехода от предыдущей сцены",
            "options": [
              { "value": "none", "label": "отсутствие перехода, сцены сменяются напрямую" },
              { "value": "cut", "label": "резкий монтажный переход без эффекта" },
              { "value": "fade", "label": "плавное затемнение или проявление между сценами" },
              { "value": "crossfade", "label": "наложение одной сцены на другую с постепенным исчезновением первой" },
              { "value": "zoom", "label": "переход с эффектом приближения или отдаления" },
              { "value": "slide", "label": "сдвиг сцены в сторону (влево, вправо, вверх, вниз)" },
              { "value": "wipe", "label": "сцена «стирается» другой по направлению (горизонтально, вертикально)" },
              { "value": "dissolve", "label": "постепенное растворение одной сцены в другой" },
              { "value": "flash", "label": "краткая вспышка между сценами, часто используется для динамики" }
            ],
            "default": null
          },
          "custom_transition": {
            "type": "text",
            "label": "Описание кастомного перехода или уточнение выбранного",
            "default": ""
          },
          "description": {
            "type": "textarea",
            "label": "Текстовое описание сцены. Смысл происходящего, действия",
            "default": ""
          }
        },
        "camera": {
          "_section": "Камера",
          "position": {
            "type": "text",
            "label": "Описание позиции расположения камеры",
            "default": ""
          },
          "shot": {
            "type": "select",
            "label": "Размер кадра",
            "options": [
              { "value": "extreme-wide", "label": "вид «ант-земля», большая сцена, мелкие детали" },
              { "value": "wide", "label": "по колено и выше, окружение в кадре" },
              { "value": "medium", "label": "пояс и выше, стандартный диалоговый план" },
              { "value": "close-up", "label": "грудь и лицо, эмоции читаются" },
              { "value": "extreme-close-up", "label": "глаза/губы, максимальная детализация" },
              { "value": "full-body", "label": "весь рост, ноги точно в кадре" }
            ],
            "default": null
          },
          "custom_shot": {
            "type": "text",
            "label": "Описание кастомного размера кадра или уточнение выбранного",
            "default": ""
          },
          "movement": {
            "type": "select",
            "label": "Тип движения",
            "options": [
              { "value": "static", "label": "неподвижная камера, фиксированная точка обзора" },
              { "value": "pan", "label": "горизонтальное вращение камеры вокруг вертикальной оси (влево/вправо)" },
              { "value": "tilt", "label": "вертикальное вращение камеры вверх или вниз" },
              { "value": "dolly", "label": "перемещение камеры вперёд или назад по прямой траектории" },
              { "value": "zoom", "label": "изменение фокусного расстояния: приближение или отдаление без физического движения камеры" },
              { "value": "truck", "label": "горизонтальное перемещение камеры (влево/вправо), параллельно сцене" },
              { "value": "pedestal", "label": "вертикальное перемещение камеры вверх или вниз" },
              { "value": "orbit", "label": "круговое движение камеры вокруг объекта" },
              { "value": "follow", "label": "камера следует за объектом, сохраняя фокус" },
              { "value": "handheld", "label": "имитация ручной съёмки, с лёгкой тряской и живостью" }
            ],
            "default": null
          },
          "custom_movement": {
            "type": "text",
            "label": "Описание кастомного движения или уточнение выбранного",
            "default": ""
          },
          "focus": {
            "type": "text",
            "label": "На что сфокусирована камера",
            "default": ""
          },
          "angle": {
            "type": "select",
            "label": "Угол обзора",
            "options": [
              { "value": "eye-level", "label": "нейтральный угол, камера на уровне глаз, создаёт ощущение естественного наблюдения" },
              { "value": "low-angle", "label": "камера смотрит снизу вверх, подчёркивает силу, масштаб или угрозу" },
              { "value": "high-angle", "label": "камера смотрит сверху вниз, делает объект уязвимым или маленьким" },
              { "value": "top-down", "label": "строго вертикальный вид сверху, используется для схем, карт, контроля" },
              { "value": "over-the-shoulder", "label": "камера за плечом персонажа, создаёт субъективную перспективу" },
              { "value": "first-person", "label": "вид от первого лица, имитирует взгляд персонажа" },
              { "value": "bird-eye", "label": "высокий обзор с большой высоты, даёт панораму или стратегический взгляд" },
              { "value": "worm-eye", "label": "экстремально низкий угол, подчёркивает величие или драму" },
              { "value": "Dutch-angle", "label": "наклонённая камера, создаёт напряжение или нестабильность" }
            ],
            "default": null
          },
          "custom_angle": {
            "type": "text",
            "label": "Описание кастомного вида или уточнение выбранного",
            "default": ""
          }
        },
        "lighting": {
          "_section": "Освещение",
          "lighting_type": {
            "type": "select",
            "label": "Тип освещения",
            "options": [
              { "value": "natural", "label": "естественное освещение: солнце, небо, отражения от окружения" },
              { "value": "ambient", "label": "общее фоновое освещение без явного источника, мягкое и рассеянное" },
              { "value": "studio", "label": "контролируемое освещение из студийных источников: софтбоксы, прожекторы" },
              { "value": "dramatic", "label": "контрастное освещение с акцентами и тенями, создаёт напряжение" },
              { "value": "volumetric", "label": "свет с видимыми лучами и глубиной, часто используется для атмосферы" },
              { "value": "neon", "label": "яркое цветное освещение, характерное для футуристичных или ночных сцен" },
              { "value": "backlight", "label": "источник света позади объекта, создаёт силуэт или контур" },
              { "value": "spotlight", "label": "направленный световой луч, выделяющий конкретный объект" },
              { "value": "firelight", "label": "тёплое, мерцающее освещение от огня, свечей или факелов" },
              { "value": "moonlight", "label": "холодное, мягкое освещение, имитирующее свет луны" }
            ],
            "default": null
          },
          "custom_light": {
            "type": "text",
            "label": "Описание кастомного освещения или уточнение выбранного",
            "default": ""
          }
        },
        "objects": {
          "_section": "Объекты",
          "items": [
            {
              "_section": "Объект ",
              "_id": 1,
              "object_type": {
                "type": "select",
                "label": "Тип объекта",
                "options": [
                  { "value": "person", "label": "человек или персонаж, может быть реалистичным, стилизованным или анимированным" },
                  { "value": "animal", "label": "любое животное: домашнее, дикое, фантастическое" },
                  { "value": "vehicle", "label": "транспортное средство: машина, поезд, корабль, дрон и т.п." },
                  { "value": "prop", "label": "предмет окружения: мебель, оружие, инструмент, аксессуар" },
                  { "value": "environment", "label": "элемент сцены: дерево, скала, здание, вода, небо" },
                  { "value": "text", "label": "текстовый объект, надпись, титр или UI-элемент" },
                  { "value": "effect", "label": "визуальный эффект: дым, огонь, частицы, магия" },
                  { "value": "structure", "label": "архитектурный объект: дом, мост, башня, интерьер" },
                  { "value": "creature", "label": "фантастическое или нереальное существо" },
                  { "value": "symbol", "label": "логотип, знак, иконка, эмблема" }
                ],
                "default": null
              },
              "custom_object": {
                "type": "textarea",
                "label": "Описание кастомного объекта или уточнение выбранного",
                "default": ""
              },
              "position": {
                "type": "text",
                "label": "Описание расположения",
                "default": ""
              },
              "animation": {
                "type": "select",
                "label": "Анимация",
                "options": [
                  { "value": "none", "label": "объект статичен, не анимируется" },
                  { "value": "idle", "label": "лёгкое фоновое движение: дыхание, покачивание, мигание" },
                  { "value": "walk", "label": "движение по сцене пешком" },
                  { "value": "run", "label": "быстрое перемещение, бег" },
                  { "value": "fly", "label": "полёт, перемещение по воздуху" },
                  { "value": "rotate", "label": "вращение вокруг своей оси" },
                  { "value": "scale", "label": "изменение размера: увеличение или уменьшение" },
                  { "value": "fade-in", "label": "плавное появление объекта" },
                  { "value": "fade-out", "label": "плавное исчезновение объекта" },
                  { "value": "bounce", "label": "подпрыгивание или колебание" },
                  { "value": "interact", "label": "взаимодействие с другим объектом (например, взять, толкнуть)" },
                  { "value": "gesture", "label": "жесты: махание рукой, указание, мимика" }
                ],
                "default": null
              },
              "custom_animation": {
                "type": "textarea",
                "label": "Описание кастомной анимации или уточнение выбранной",
                "default": ""
              },
              "material": {
                "type": "select",
                "label": "Материал",
                "options": [
                  { "value": "metal", "label": "металлическая поверхность: блестящая, отражающая, может быть матовой или полированной" },
                  { "value": "wood", "label": "древесина: текстурная, органическая, может быть грубой или лакированной" },
                  { "value": "glass", "label": "прозрачный или полупрозрачный материал с отражениями и преломлением" },
                  { "value": "plastic", "label": "синтетический материал, может быть глянцевым, матовым или полупрозрачным" },
                  { "value": "fabric", "label": "ткань: мягкая, текстурная, может быть драпированной или натянутой" },
                  { "value": "stone", "label": "камень: твёрдый, шероховатый, может быть природным или обработанным" },
                  { "value": "skin", "label": "поверхность живого существа: человек, животное, фантастическое существо" },
                  { "value": "liquid", "label": "жидкость: вода, масло, кровь, магма и т.п." },
                  { "value": "rubber", "label": "эластичный материал, часто используется для технических объектов" },
                  { "value": "paper", "label": "тонкий, матовый материал, может быть текстурным или гладким" },
                  { "value": "organic", "label": "биологическая структура: листья, кора, мясо, слизь" }
                ],
                "default": null
              },
              "custom_material": {
                "type": "text",
                "label": "Описание кастомного материала или уточнение выбранного",
                "default": ""
              },
              "objects_style": {
                "type": "select",
                "label": "Визуальный стиль",
                "options": [
                  { "value": "realistic", "label": "фотореализм, точные текстуры, физика и освещение, приближенные к реальному миру" },
                  { "value": "cinematic", "label": "киношная постановка: глубина кадра, цветокоррекция, композиция, драматизм" },
                  { "value": "cartoon", "label": "мультяшный стиль с упрощёнными формами, яркими цветами и контурной графикой" },
                  { "value": "anime", "label": "японская анимация: стилизованные персонажи, динамичные сцены, характерные фоны" },
                  { "value": "stylized", "label": "художественная стилизация: преувеличенные формы, нестандартные текстуры, выразительность" },
                  { "value": "low-poly", "label": "упрощённая геометрия с минимальным числом полигонов, часто используется в 3D-визуализациях" },
                  { "value": "pixel-art", "label": "пиксельная графика в ретро-стиле, напоминающая 8/16-битные игры" },
                  { "value": "sketch", "label": "ручная прорисовка: карандашный, чернильный или маркерный стиль" },
                  { "value": "abstract", "label": "художественный стиль без реализма, акцент на форму, цвет и движение" },
                  { "value": "isometric", "label": "псевдо-3D с фиксированной перспективой, часто используется в инфографике и играх" },
                  { "value": "minimalist", "label": "минимализм: простые формы, ограниченная палитра, чистый и лаконичный UX" },
                  { "value": "surreal", "label": "сюрреализм: нелогичные сцены, метафоры, сны и необычные композиции" },
                  { "value": "mixed", "label": "смешанный стиль, комбинирующий несколько подходов; уточняется на уровне сцены" }
                ],
                "default": null
              },
              "custom_style": {
                "type": "text",
                "label": "Описание кастомного стиля или уточнение выбранного",
                "default": ""
              }
            }
          ]
        },
        "audio": {
          "_section": "Аудио",
          "ambient": {
            "type": "select",
            "label": "Фоновый звук",
            "options": [
              { "value": "footsteps", "label": "звук шагов: по полу, земле, снегу, листве, часто используется для обозначения движения персонажа" },
              { "value": "door", "label": "скрип, удар, открытие или закрытие двери, добавляет реализм и акцент на смену локации" },
              { "value": "glass_break", "label": "звон разбивающегося стекла, используется для драматических моментов, разрушения или неожиданности" },
              { "value": "gunshot", "label": "выстрел: одиночный или серия, подходит для боевых сцен, угрозы или напряжения" },
              { "value": "magic", "label": "энергетический импульс, вспышка, искры, часто сопровождает заклинания, фантастические действия" },
              { "value": "heartbeat", "label": "биение сердца: спокойное или учащённое, усиливает эмоции, тревогу или интимность" },
              { "value": "scream", "label": "крик: испуг, боль, отчаяние, сильный эмоциональный акцент" },
              { "value": "laugh", "label": "смех: добрый, зловещий, детский, добавляет характер и настроение" },
              { "value": "roar", "label": "рёв животного или существа, используется для силы, угрозы или эпичности" },
              { "value": "engine", "label": "звук мотора: авто, дрон, техника, подходит для транспорта, индустриальных сцен" },
              { "value": "rain", "label": "капли, ливень, шум воды, может быть частью действия, например, дождь по крыше" },
              { "value": "fire", "label": "вспышки, потрескивание, жар, используется как активный элемент сцены" },
              { "value": "typing", "label": "щелчки клавиш, набор текста, подходит для офисных, хакерских или интроспективных сцен" },
              { "value": "beep", "label": "короткий сигнал, уведомление, часто используется в интерфейсах, технике, тревогах" },
              { "value": "breath", "label": "дыхание: спокойное, тяжёлое, учащённое, добавляет интимность, напряжение или усталость" },
              { "value": "whisper", "label": "шёпот, мягкий голос, используется для секретов, близости или страха" },
              { "value": "growl", "label": "рычание: животное или фантастическое существо, подходит для угрозы или силы" },
              { "value": "clang", "label": "металлический удар, столкновение, используется в боевых или индустриальных сценах" },
              { "value": "rustle", "label": "шорох листвы, ткани, бумаги, добавляет реализм и атмосферу" },
              { "value": "splash", "label": "звук воды при падении, прыжке, часто используется в сценах с движением через жидкость" }
            ],
            "default": null
          },
          "custom_sounds": {
            "type": "text",
            "label": "Пользовательское описание звука, может быть уникальным, смешанным или стилизованным",
            "default": ""
          },
          "ambient_volume": {
            "type": "number",
            "label": "Относительная громкость фоновых звуков (1-10)",
            "default": null
          },
          "music": {
            "type": "text",
            "label": "Музыкальная дорожка или настроение",
            "default": ""
          },
          "music_volume": {
            "type": "number",
            "label": "Относительная громкость музыки (1-10)",
            "default": null
          },
          "effects": {
            "type": "select",
            "label": "Звуковые эффекты",
            "options": [
              { "value": "echo", "label": "отражение звука с затуханием, используется для пещер, пустых помещений, драматических акцентов" },
              { "value": "reverb", "label": "пространственная гулкость, имитирующая помещение, добавляет глубину и реализм" },
              { "value": "distortion", "label": "искажение звука: перегруз, шум, хрип, часто используется в техно, боевых или тревожных сценах" },
              { "value": "muffle", "label": "приглушение: как сквозь стену, ткань или воду, используется для отдалённых или скрытых источников" },
              { "value": "robotic", "label": "синтезированный тембр, имитирующий машину или ИИ, подходит для sci-fi, интерфейсов, голосов роботов" },
              { "value": "fade-in", "label": "плавное появление звука, используется для мягкого начала или постепенного усиления" },
              { "value": "fade-out", "label": "плавное исчезновение звука, подходит для завершения сцены или перехода" },
              { "value": "vibration", "label": "дрожание, резонанс, часто применяется к низким частотам, технике или магии" },
              { "value": "pitch-shift", "label": "изменение высоты звука: выше или ниже, используется для стилизации, эмоций или фантастики" },
              { "value": "speed-change", "label": "ускорение или замедление звука, подходит для сюрреализма, монтажа или спецэффектов" },
              { "value": "stereo-pan", "label": "перемещение звука между левым и правым каналом, добавляет динамику и пространственность" },
              { "value": "layered", "label": "наложение нескольких звуков, используется для сложных сцен или усиления эффекта" },
              { "value": "loop", "label": "зацикливание звука, подходит для фоновых слоёв или повторяющихся действий" }
            ],
            "default": null
          },
          "custom_effects": {
            "type": "text",
            "label": "Пользовательское описание модификатора, может быть уникальным, комбинированным или стилизованным",
            "default": ""
          },
          "talk": {
            "type": "textarea",
            "label": "Поле для записи речи, диалога",
            "default": ""
          },
          "language": {
            "type": "text",
            "label": "Использовать язык, примечание",
            "default": "Русский, язык не менять"
          }
        },

        "objects": {
          "_section": "Объекты",
          "items": [
            {
              "_section": "Объект ",
              "_id": 1,




        "text_overlay": {
          "_section": "Надписи",
          "items": [
            {
              "_section": "Объект ",
              "_id": 1,
              "content": {
                "type": "text",
                "label": "Текст надписи",
                "default": ""
              },
              "language": {
                "type": "text",
                "label": "Использовать язык, примечание",
                "default": "Русский, язык не менять"
              },
              "position": {
                "type": "text",
                "label": "Расположение на экране",
                "default": ""
              },
              "style": {
                "_section": "Стиль текста",
                "font": {
                  "type": "text",
                  "label": "Название шрифта",
                  "default": ""
                },
                "size": {
                  "type": "number",
                  "label": "Размер шрифта",
                  "default": null
                },
                "color": {
                  "type": "color",
                  "label": "Цвет текста в HEX-формате (`#ff0000`)",
                  "default": ""
                },
                "custom_style": {
                  "type": "text",
                  "label": "Описание кастомного стиля или уточнение выбранного",
                  "default": ""
                }
              }
            }
          ]
        }
      }
    ]
  }
}
```