
# 🧩 Составные части

## 1. **Личный чат с ботом**
- Это единственный чат, который отображается у пользователя в Telegram.
- В нём происходит всё взаимодействие:
  - Общение с ботом.
  - Заполнение и редактирование форм через Mini App.
  - Просмотр своих промптов с мультимедиа.
  - Управление промптами: поделиться, удалить, редактировать.
  - Переход к обсуждениям и публичной витрине.

### **Кнопки в ленте после каждого промпта**

#### 1. **Создание промпта**
   - Пользователь открывает Mini App в личном чате.
   - Заполняет форму, добавляет мультимедиа.
   - Бот сохраняет промпт и отображает его в личной ленте.

#### 2. **Витрина промптов**

### **Кнопки в сообщениях (промптах)**

#### 1. **Кнопка “Опубликовать”**
   - Отображается в сообщении, если промпт ещё не опубликован.
   - При нажатии:
     - Бот создаёт новую тему в супергруппе.
     - Публикует промпт как первое сообщение темы.
     - Сохраняет `message_thread_id` и `message_id`.
   - После публикации кнопка “Опубликовать” заменяется на “Комментарии”.
   - Она ведёт в соответствующую тему обсуждения.

#### 2. **Кнопка редактировать**

#### 3. **Кнопка удалить**



## 2. **Публичная супергруппа с включёнными темами**
- Это единое пространство для всех опубликованных промптов.
- Группа публичная, её можно найти через поиск Telegram — она служит витриной и рекламой проекта.
- Пользователи могут читать, комментировать, но не публиковать напрямую — всё управляется ботом.
- Все темы отображаются как каталог промптов.
- Внутри каждой темы — заглавный промпт и комментарии.

### **Кнопки в ленте после каждого промпта**

#### **Вернуться в личный чат**
   - “Вернуться в личный чат” — ведёт к боту.

### **Кнопки в сообщениях (промптах)**

#### **Скопировать себе**
   - бот отправляет промпт в личный чат пользователя (если авторизован, заходил в личный чат и нажимал Старт).

JPrompter
    alembic
    app
        


JPrompter/
├── alembic/                     # Каталог миграций Alembic
├── app/                         # Основной код приложения
│   ├── api/                     # API-интерфейс
│   │   ├── v1/                  # Версия API v1
│   │   │   ├── endpoints/       # Обработчики API
│   │   │   │   ├── __init__.py
│   │   │   │   ├── activity.py
│   │   │   │   ├── buildings.py
│   │   │   │   ├── docs.py
│   │   │   │   ├── error.py
│   │   │   │   ├── geo.py
│   │   │   │   ├── organizations.py
│   │   │   ├── __init__.py
│   │   ├── __init__.py
│   ├── core/                    # Базовые настройки и утилиты
│   │   ├── __init__.py
│   │   ├── config.py             # Конфигурация приложения
│   │   ├── database.py           # Настройки базы данных
│   │   ├── security.py           # Безопасность и аутентификация
│   ├── db/                       # Работа с базой данных
│   │   ├── activities/
│   │   │   ├── __init__.py
│   │   │   ├── by_activity.py    # Запросы по видам деятельности
│   │   ├── organizations/        # Запросы по организациям
│   │   │   ├── __init__.py
│   │   │   ├── by_activity.py
│   │   │   ├── by_building.py
│   │   │   ├── by_geo.py
│   │   │   ├── by_organization.py
│   ├── models/                   # Описание моделей БД
│   │   ├── __init__.py
│   │   ├── models.py
│   ├── schemas/                  # Схемы для валидации данных (Pydantic)
│   │   ├── __init__.py
│   │   ├── schemas.py
│   ├── services/                 # Бизнес-логика приложения
│   │   ├── __init__.py
│   │   ├── organization.py        # Логика работы с организациями
│   ├── main.py                    # Основной вход в приложение
├── fixtures/                      # Тестовые данные
│   ├── activities.json            # Виды деятельности
│   ├── organizations.json         # Организации
├── init-scripts/                  # Скрипты инициализации
│   ├── init-postgis.sql           # Скрипт для инициализации PostGIS
├── tests/                         # Тесты проекта
├── venv/                          # Виртуальное окружение (не входит в репозиторий)
├── .dockerignore                  # Игнорируемые файлы для Docker
├── .env                            # Переменные окружения
├── .env_server                     # Переменные окружения для сервера
├── alembic.ini                     # Конфигурация Alembic
├── docker-compose.yml              # Конфигурация Docker Compose
├── Dockerfile                      # Конфигурация Docker-контейнера
├── init_db.py                      # Скрипт инициализации БД
├── README.md                        # Документация
├── requirements.txt                 # Список зависимостей